<?php
# {{ ansible_managed }}

$ldap_url = "{{ openldap_master_ldap_url }}";
$ldap_starttls = {{ openldap_master_ldap_tls }};
$ldap_binddn = "{{ openldap_master_reset_bind_user }}";
$ldap_bindpw = "{{ openldap_master_reset_bind_pass }}";
$ldap_base = "{{ openldap_master_ldap_basedn }}";
$ldap_filter = "(&(objectClass=inetorgperson)($ldap_login_attribute={login}))";

# Local password policy - match this to the LDAP policy for the best user experience
$pwd_min_length = 6;
$pwd_max_length = 0;
$pwd_min_lower = 0;
$pwd_min_upper = 0;
$pwd_min_digit = 0;
$pwd_min_special = 0;

$pwd_special_chars = "^a-zA-Z0-9";
$pwd_forbidden_chars = "@%";
$pwd_no_reuse = true;
$pwd_complexity = 3;
$pwd_show_policy = "always";
$pwd_show_policy_pos = "above";

$who_change_password = "manager";

$use_questions = false;
$use_tokens = false;
$use_sms = false;

$mail_address_use_ldap = true;
$mail_from = "{{ openldap_master_mail_from }}";
$mail_from_name = "{{ openldap_master_mail_from_name }}";
$notify_on_change = true

$keyphrase = "{{ openldap_master_reset_token_key }}";

{% if openldap_master_reset_logo_url is defined %}
$logo = "logo.png";
{% endif %}

?>